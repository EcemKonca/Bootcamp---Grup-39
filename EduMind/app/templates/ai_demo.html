{% extends "base.html" %}

{% block content %}
<div class="ai-demo-container">
    <div class="demo-header">
        <h2>ğŸ¤– AI Demo - Metin Analizi Test AlanÄ±</h2>
        <p class="demo-description">
            Yapay zeka Ã¶zelliklerini burada test edebilirsiniz. 
            Bir metin girin ve AI'Ä±n nasÄ±l Ã¶zetlediÄŸini, anahtar kelimeler Ã§Ä±kardÄ±ÄŸÄ±nÄ± gÃ¶rin!
        </p>
    </div>

    <div class="demo-content">
        <!-- Metin GiriÅŸi -->
        <div class="input-section">
            <h3>ğŸ“ Test Metni Girin</h3>
            <div class="demo-examples">
                <button onclick="loadExample(1)" class="example-btn">ğŸ“š Ã–rnek: EÄŸitim</button>
                <button onclick="loadExample(2)" class="example-btn">ğŸ”¬ Ã–rnek: Bilim</button>
                <button onclick="loadExample(3)" class="example-btn">ğŸ“– Ã–rnek: Tarih</button>
            </div>
            <textarea 
                id="demo-text" 
                placeholder="Buraya analiz etmek istediÄŸiniz metni yazÄ±n... (En az 50 karakter)"
                rows="8"
            ></textarea>
            <div class="demo-controls">
                <button onclick="analyzeText()" class="btn btn-primary">
                    ğŸ§  AI ile Analiz Et
                </button>
                <button onclick="clearText()" class="btn btn-outline">
                    ğŸ—‘ï¸ Temizle
                </button>
            </div>
        </div>

        <!-- SonuÃ§lar -->
        <div class="results-section" id="results-section" style="display: none;">
            <h3>ğŸ¯ AI Analiz SonuÃ§larÄ±</h3>
            
            <div class="result-cards">
                <div class="result-card summary-card">
                    <h4>ğŸ“„ Ã–zet</h4>
                    <div id="ai-summary" class="result-content">
                        <!-- AI Ã¶zeti buraya gelecek -->
                    </div>
                </div>

                <div class="result-card keywords-card">
                    <h4>ğŸ”‘ Anahtar Kelimeler</h4>
                    <div id="ai-keywords" class="result-content">
                        <!-- Anahtar kelimeler buraya gelecek -->
                    </div>
                </div>

                <div class="result-card stats-card">
                    <h4>ğŸ“Š Ä°statistikler</h4>
                    <div id="ai-stats" class="result-content">
                        <!-- Ä°statistikler buraya gelecek -->
                    </div>
                </div>
            </div>

            <!-- Quiz OluÅŸturma -->
            <div class="quiz-section">
                <button onclick="generateDemoQuiz()" class="btn btn-secondary">
                    ğŸ® Bu Metinden Quiz OluÅŸtur
                </button>
                <div id="demo-quiz" class="demo-quiz-content"></div>
            </div>
        </div>

        <!-- Loading -->
        <div class="loading-section" id="loading-section" style="display: none;">
            <div class="loading-spinner">ğŸ¤–</div>
            <p>AI analiz ediyor...</p>
        </div>
    </div>

    <!-- API AnahtarÄ± UyarÄ±sÄ± -->
    <div class="api-warning">
        <h4>âš ï¸ API AnahtarÄ± Bilgisi</h4>
        <p>
            GerÃ§ek AI analizi iÃ§in Google Gemini API anahtarÄ± gereklidir. 
            <a href="https://makersuite.google.com/app/apikey" target="_blank" rel="noopener">
                Buradan Ã¼cretsiz API anahtarÄ± alabilirsiniz
            </a> ve <code>config.py</code> dosyasÄ±na ekleyebilirsiniz.
        </p>
        <p>
            <strong>Demo Modu:</strong> API anahtarÄ± yoksa Ã¶rnek cevaplar gÃ¶sterilir.
        </p>
    </div>
</div>

<!-- Styles -->
<style>
.ai-demo-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

.demo-header {
    text-align: center;
    margin-bottom: 40px;
    padding: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px;
}

.demo-header h2 {
    margin: 0 0 15px 0;
    font-size: 2.2rem;
}

.demo-description {
    font-size: 1.1rem;
    opacity: 0.9;
    margin: 0;
}

.demo-content {
    display: grid;
    gap: 30px;
}

.input-section {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.input-section h3 {
    margin-top: 0;
    color: #333;
    border-bottom: 2px solid #e0e0e0;
    padding-bottom: 10px;
}

.demo-examples {
    margin-bottom: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.example-btn {
    padding: 8px 15px;
    border: 2px solid #007bff;
    background: white;
    color: #007bff;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.example-btn:hover {
    background: #007bff;
    color: white;
}

#demo-text {
    width: 100%;
    padding: 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-family: inherit;
    font-size: 1rem;
    line-height: 1.5;
    resize: vertical;
    min-height: 150px;
}

#demo-text:focus {
    border-color: #007bff;
    outline: none;
}

.demo-controls {
    margin-top: 20px;
    text-align: center;
    display: flex;
    gap: 15px;
    justify-content: center;
}

.results-section {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.results-section h3 {
    margin-top: 0;
    color: #333;
    border-bottom: 2px solid #e0e0e0;
    padding-bottom: 10px;
}

.result-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.result-card {
    padding: 20px;
    border-radius: 8px;
    border-left: 4px solid #007bff;
}

.summary-card {
    background: #e8f5e8;
    border-left-color: #28a745;
}

.keywords-card {
    background: #e3f2fd;
    border-left-color: #2196f3;
}

.stats-card {
    background: #fff3e0;
    border-left-color: #ff9800;
}

.result-card h4 {
    margin-top: 0;
    margin-bottom: 15px;
    color: #333;
}

.result-content {
    line-height: 1.6;
}

.quiz-section {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #6f42c1;
}

.demo-quiz-content {
    margin-top: 20px;
    text-align: left;
}

.loading-section {
    text-align: center;
    padding: 60px 20px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.loading-spinner {
    font-size: 3rem;
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.api-warning {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 20px;
    margin-top: 30px;
}

.api-warning h4 {
    margin-top: 0;
    color: #856404;
}

.api-warning p {
    margin-bottom: 10px;
    color: #856404;
}

.api-warning a {
    color: #007bff;
    font-weight: bold;
}

.api-warning code {
    background: #f8f9fa;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: monospace;
}

/* Responsive */
@media (max-width: 768px) {
    .result-cards {
        grid-template-columns: 1fr;
    }
    
    .demo-controls {
        flex-direction: column;
        align-items: center;
    }
    
    .demo-examples {
        justify-content: center;
    }
}
</style>

<!-- JavaScript -->
<script>
const examples = {
    1: `EÄŸitim, bireylerin bilgi, beceri, deÄŸer ve tutumlarÄ±nÄ± geliÅŸtiren sistematik bir sÃ¼reÃ§tir. 
Modern eÄŸitim sistemleri, Ã¶ÄŸrencilerin sadece akademik bilgi edinmelerine deÄŸil, aynÄ± zamanda 
eleÅŸtirel dÃ¼ÅŸÃ¼nme, problem Ã§Ã¶zme ve yaratÄ±cÄ±lÄ±k becerilerini de geliÅŸtirmelerine odaklanÄ±r. 
Teknolojinin eÄŸitime entegrasyonu, Ã¶ÄŸrenme deneyimlerini zenginleÅŸtirmekte ve kiÅŸiselleÅŸtirilmiÅŸ 
Ã¶ÄŸretim imkÃ¢nlarÄ± sunmaktadÄ±r. EÄŸitim alanÄ±ndaki en Ã¶nemli geliÅŸmelerden biri, yapay zeka 
destekli Ã¶ÄŸrenme platformlarÄ±nÄ±n ortaya Ã§Ä±kmasÄ±dÄ±r. Bu platformlar, her Ã¶ÄŸrencinin Ã¶ÄŸrenme 
stiline ve hÄ±zÄ±na uygun iÃ§erikler sunarak eÄŸitimde bireyselleÅŸtirme saÄŸlamaktadÄ±r.`,
    
    2: `Bilim, doÄŸal dÃ¼nyayÄ± sistematik olarak inceleyen ve evrensel yasalarÄ± keÅŸfetmeye Ã§alÄ±ÅŸan 
bir disiplindir. Bilimsel yÃ¶ntem, gÃ¶zlem, hipotez kurma, deney yapma ve sonuÃ§larÄ± analiz etme 
aÅŸamalarÄ±ndan oluÅŸur. Bu yÃ¶ntem sayesinde bilim insanlarÄ±, objektif ve doÄŸrulanabilir bilgiler 
Ã¼retirler. Modern bilim, fizik, kimya, biyoloji, matematik gibi temel dallarÄ± iÃ§erir. Her dal, 
kendi iÃ§inde uzmanlaÅŸmÄ±ÅŸ alt dallarÄ± barÄ±ndÄ±rÄ±r. Bilimsel araÅŸtÄ±rmalar, toplumsal sorunlara 
Ã§Ã¶zÃ¼m Ã¼retmekte ve teknolojik geliÅŸmelere katkÄ± saÄŸlamaktadÄ±r. GÃ¼nÃ¼mÃ¼zde bilim, 
disiplinlerarasÄ± Ã§alÄ±ÅŸmalara Ã¶nem vermekte ve karmaÅŸÄ±k problemleri Ã§Ã¶zmek iÃ§in farklÄ± 
alanlarÄ±n birleÅŸtirilmesini teÅŸvik etmektedir.`,
    
    3: `Tarih, geÃ§miÅŸte yaÅŸanan olaylarÄ±, geliÅŸmeleri ve deÄŸiÅŸimleri inceleyen bir bilim dalÄ±dÄ±r. 
TarihÃ§iler, yazÄ±lÄ± belgeler, arkeolojik kalÄ±ntÄ±lar ve sÃ¶zlÃ¼ gelenekleri kullanarak geÃ§miÅŸi 
yeniden yapÄ±landÄ±rmaya Ã§alÄ±ÅŸÄ±rlar. Tarih Ã¶ÄŸrenimi, toplumlarÄ± ve medeniyetleri anlamak iÃ§in 
kritik Ã¶neme sahiptir. GeÃ§miÅŸin deneyimlerinden yararlanarak gelecek iÃ§in dersler Ã§Ä±karmak 
mÃ¼mkÃ¼ndÃ¼r. Tarihsel olaylar, ekonomik, sosyal, politik ve kÃ¼ltÃ¼rel faktÃ¶rlerin etkileÅŸimi 
sonucu ortaya Ã§Ä±kar. Bu nedenle tarih, Ã§ok boyutlu bir perspektifle incelenmelidir. Modern 
tarih yazÄ±mÄ±, sadece siyasi olaylarÄ± deÄŸil, sÄ±radan insanlarÄ±n yaÅŸamlarÄ±nÄ±, kÃ¼ltÃ¼rlerini 
ve deneyimlerini de kapsamaktadÄ±r.`
};

function loadExample(num) {
    document.getElementById('demo-text').value = examples[num];
}

function clearText() {
    document.getElementById('demo-text').value = '';
    document.getElementById('results-section').style.display = 'none';
}

async function analyzeText() {
    const text = document.getElementById('demo-text').value.trim();
    
    if (text.length < 50) {
        alert('LÃ¼tfen en az 50 karakterlik bir metin girin.');
        return;
    }
    
    // Loading gÃ¶ster
    document.getElementById('results-section').style.display = 'none';
    document.getElementById('loading-section').style.display = 'block';
    
    try {
        const response = await fetch('/api/analyze_text', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ text: text })
        });
        
        const data = await response.json();
        
        // Loading gizle
        document.getElementById('loading-section').style.display = 'none';
        
        if (data.error) {
            alert('Analiz hatasÄ±: ' + data.error);
            return;
        }
        
        displayResults(data);
        
    } catch (error) {
        document.getElementById('loading-section').style.display = 'none';
        alert('BaÄŸlantÄ± hatasÄ±: ' + error.message);
    }
}

function displayResults(data) {
    // Ã–zet
    document.getElementById('ai-summary').innerHTML = `
        <p>${data.summary}</p>
        ${data.mode === 'demo' ? '<div class="demo-badge">Demo Modu</div>' : 
          data.mode === 'ai' ? '<div class="ai-badge">AI Destekli</div>' : ''}
    `;
    
    // Anahtar kelimeler
    const keywordsHtml = data.keywords ? 
        data.keywords.split(',').map(k => 
            `<span class="keyword-tag">${k.trim()}</span>`
        ).join('') : 
        '<span class="no-keywords">Anahtar kelime bulunamadÄ±</span>';
    
    document.getElementById('ai-keywords').innerHTML = keywordsHtml;
    
    // Ä°statistikler
    document.getElementById('ai-stats').innerHTML = `
        <div class="stat-grid">
            <div class="stat-item">
                <span class="stat-number">${data.word_count || 0}</span>
                <span class="stat-label">Kelime</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">${document.getElementById('demo-text').value.length}</span>
                <span class="stat-label">Karakter</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">${Math.round((data.word_count || 0) * 0.5)}</span>
                <span class="stat-label">Dakika Okuma</span>
            </div>
        </div>
    `;
    
    // SonuÃ§larÄ± gÃ¶ster
    document.getElementById('results-section').style.display = 'block';
    document.getElementById('results-section').scrollIntoView({behavior: 'smooth'});
}

function generateDemoQuiz() {
    const text = document.getElementById('demo-text').value.trim();
    
    if (!text) {
        alert('Ã–nce bir metin girin ve analiz edin.');
        return;
    }
    
    // Demo quiz gÃ¶ster
    document.getElementById('demo-quiz').innerHTML = `
        <div class="quiz-demo">
            <h5>ğŸ¯ Demo Quiz</h5>
            <p><em>Bu Ã¶zellik ÅŸu anda geliÅŸtirme aÅŸamasÄ±ndadÄ±r. 
            GerÃ§ek notlarÄ±nÄ±zda AI quiz Ã¶zelliÄŸini kullanabilirsiniz!</em></p>
            <a href="/note/new" class="btn btn-primary">Not OluÅŸturup Quiz Dene</a>
        </div>
    `;
}
</script>

<style>
.demo-badge, .ai-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75em;
    font-weight: bold;
    margin-top: 10px;
}

.demo-badge {
    background: #ffc107;
    color: #212529;
}

.ai-badge {
    background: #28a745;
    color: white;
}

.keyword-tag {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 0.85em;
    font-weight: 500;
    margin: 2px;
    display: inline-block;
}

.no-keywords {
    color: #999;
    font-style: italic;
}

.stat-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.stat-item {
    text-align: center;
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
}

.stat-number {
    display: block;
    font-size: 1.5em;
    font-weight: bold;
    color: #007bff;
}

.stat-label {
    display: block;
    font-size: 0.9em;
    color: #666;
    margin-top: 5px;
}

.quiz-demo {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
}
</style>
{% endblock %} 